---
// Menu.astro
import NavMenu from "./BarMenu/NavMenu.astro";
import MobileNavMenu from "./HamburgerMenu/HamburgerNavMenu.jsx";
import defaultTheme from 'tailwindcss/defaultTheme';

// Props:
// - items: menu data array
// - breakpoint: Tailwind breakpoint (e.g. "md", "lg"; default "md")
// - menuClass: custom classes for desktop menu container
// - menuItemClass: classes for individual menu items
// - submenuClass: classes for submenu containers (falls back to menuItemClass if not provided)
// - isHierarchical: boolean flag for nested vs flat menus (default true)
// - menuItemComponent: optional override for menu item component
const { 
  items, 
  breakpoint = "md",
  menuClass = "",
  menuItemClass = "",
  submenuClass = "",
  isHierarchical = true,
  menuItemComponent,
} = Astro.props;

// Look up breakpoint value from Tailwind's default theme.
const bpValue = defaultTheme.screens[breakpoint] || defaultTheme.screens.md;
const mobileMediaQuery = `(max-width: ${bpValue})`;
---
<!-- Desktop menu: visible on screens above the breakpoint -->
<nav class={`hidden ${breakpoint}:block ${menuClass}`}>
  <NavMenu 
    items={items} 
    menuItemClass={menuItemClass}
    submenuClass={submenuClass || menuItemClass}
    isHierarchical={isHierarchical}
    menuItemComponent={menuItemComponent}
    breakpoint={breakpoint}
  />
</nav>
<!-- Mobile menu: visible on screens below the breakpoint -->
<div class={`block ${breakpoint}:hidden`}>
  <MobileNavMenu 
    items={items} 
    client:visible
    menuItemClass={menuItemClass}
    submenuClass={submenuClass || menuItemClass}
    isHierarchical={isHierarchical}
    menuItemComponent={menuItemComponent}
    breakpoint={breakpoint}
  />
</div>
