---
import NavMenu from "./BarMenu/NavMenu.astro";
import MobileNavMenu from "./HamburgerMenu/HamburgerNavMenu.jsx";
import defaultTheme from 'tailwindcss/defaultTheme';

// Props with default breakpoint "md" unless explicitly set to "none"
const { 
  items, 
  breakpoint = "none",
  menuClass = "",
  menuItem,
  submenuItem,
  isHierarchical = true,
} = Astro.props as {
  items: any;
  breakpoint?: keyof typeof defaultTheme.screens | "none";
  menuClass?: string;
  menuItem?: any;
  submenuItem?: any;
  isHierarchical?: boolean;
};

// Check for the special "none" value
const noBreakpoint = breakpoint === "none";

if (!noBreakpoint) {
  // Regular breakpoint handling using Tailwind breakpoints
  const bpValue = defaultTheme.screens[breakpoint] || defaultTheme.screens.md;
}
---
{!noBreakpoint ? (
  <>
    <!-- Desktop menu: visible on screens above the breakpoint -->
    <nav class={`hidden ${breakpoint}:block ${menuClass}`}>
      <NavMenu 
        items={items} 
        menuItem={menuItem}
        submenuItem={submenuItem}
        isHierarchical={isHierarchical}
        breakpoint={breakpoint}
      />
    </nav>
    <!-- Mobile menu: visible on screens below the breakpoint -->
    <div class={`block ${breakpoint}:hidden`}>
      <MobileNavMenu 
        items={items} 
        client:visible
        menuItem={menuItem}
        submenuItem={submenuItem}
        isHierarchical={isHierarchical}
        breakpoint={breakpoint}
      />
    </div>
  </>
) : (
  // When breakpoint is "none", render a single menu version (e.g. the desktop version) for all screen sizes
  <nav class={menuClass}>
    <NavMenu 
      items={items} 
      menuItem={menuItem}
      submenuItem={submenuItem}
      isHierarchical={isHierarchical}
      breakpoint={breakpoint}
    />
  </nav>
)}
