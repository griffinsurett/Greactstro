---
// src/components/Section/VariantWrapper.astro
/**
 * VariantWrapper - Renders the appropriate variant component based on the variant prop
 * Now supports content collection data integration
 */
import Hero from "./Variants/Hero.astro";
import TwoCol from "./Variants/TwoCol.astro";
import CardGrid from "./Variants/CardGrid.astro";
import Centered from "./Variants/Centered.astro";
import Simple from "./Variants/Simple.astro";
import Masonry from "./Variants/Masonry.astro";
import Tabs from "./Variants/Tabs.astro";
import Accordion from "./Variants/Accordion.astro";
import CustomGrid from "./Variants/CustomGrid.astro";

interface Props {
  variant: string;
  variantProps?: Record<string, any>;
  collectionData?: any[];
  meta?: any;
}

const { variant, variantProps = {}, collectionData = [], meta = null } = Astro.props;

// Merge meta data with variant props for better content integration
const enhancedProps = {
  ...variantProps,
  collectionData: collectionData || [],
  meta: meta || {},
  // Use meta data as defaults if available (with null checks)
  heading: variantProps.heading || (meta?.heading || ''),
  description: variantProps.description || (meta?.description || ''),
  buttons: variantProps.buttons || (meta?.buttons || []),
};
---

{/* Render the appropriate variant component */}
{variant === 'hero' && <Hero {...enhancedProps} />}
{variant === 'twoCol' && <TwoCol {...enhancedProps} />}
{variant === 'cardGrid' && <CardGrid {...enhancedProps} />}
{variant === 'centered' && <Centered {...enhancedProps} />}
{variant === 'simple' && <Simple {...enhancedProps} />}
{variant === 'masonry' && <Masonry {...enhancedProps} />}
{variant === 'tabs' && <Tabs {...enhancedProps} />}
{variant === 'accordion' && <Accordion {...enhancedProps} />}
{variant === 'customGrid' && <CustomGrid {...enhancedProps} />}
