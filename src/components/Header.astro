---
// src/components/Header.astro
import { SiteData } from '@/content/SiteData';
import { buildContentQueries } from '@/utils/ContentQueries';

// Define a static base query for the MainNavMenu.
const baseMainNavMenu = [
  { id: "home", label: "Home", slug: "/" }
];

// Merge dynamic queries into the base.
const finalQueries = await buildContentQueries({ MainNavMenu: baseMainNavMenu });
const headerMenu = finalQueries.MainNavMenu || [];
---
<header>
  <a href="/">
    <h1>{SiteData.title}</h1>
  </a>
  <nav>
    <ul>
      {headerMenu.map((item) => (
        <li>
          <a href={item.slug}>{item.label}</a>
          {item.children && item.children.length > 0 && (
            <ul>
              {item.children.map((child) => (
                <li>
                  <a href={child.slug}>{child.label}</a>
                </li>
              ))}
            </ul>
          )}
        </li>
      ))}
    </ul>
  </nav>
</header>
