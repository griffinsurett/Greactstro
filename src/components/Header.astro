---
import { SiteData } from '@/content/SiteData';
import { buildContentQueries } from '@/utils/ContentQueries';
import NavMenu from '../components/Menu/NavMenu.astro';
import MobileNavMenu from '../components/Menu/MobileNavMenu.jsx';

const baseMainNavMenu = [{ id: "home", label: "Home", slug: "/" }];
const finalQueries = await buildContentQueries({ MainNavMenu: baseMainNavMenu });
const headerMenu = finalQueries.MainNavMenu || [];
---
<header class="flex justify-between items-center">
  <a href="/">
    <h1>{SiteData.title}</h1>
  </a>
  
  <!-- Desktop Navigation (hidden on mobile) -->
  <nav class="hidden md:block">
    <NavMenu items={headerMenu} />
  </nav>

  <!-- Mobile Navigation Trigger (static HTML) -->
  <div class="md:hidden flex items-center">
    <!-- Hidden checkbox used as the trigger -->
    <input type="checkbox" id="mobile-nav-toggle" class="hidden" />
    
    <!-- Hamburger icon as an inline SVG -->
    <label for="mobile-nav-toggle" class="cursor-pointer">
      <svg id="hamburger-icon" class="w-8 h-8" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <line class="hamburger-line top-line" x1="4" y1="8" x2="28" y2="8" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
        <line class="hamburger-line middle-line" x1="4" y1="16" x2="28" y2="16" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
        <line class="hamburger-line bottom-line" x1="4" y1="24" x2="28" y2="24" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
      </svg>
    </label>
  </div>

  <!-- Mobile Navigation Menu: client loaded -->
  <MobileNavMenu items={headerMenu} client:idle />
</header>
